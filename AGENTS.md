# Repository Guidelines

## Project Structure and Module Organization
- `Assets/` holds editable Unity content (scripts, scenes, prefabs).
- `Assets/Tests/EditMode` and `Assets/Tests/PlayMode` contain Unity Test Runner tests.
- `Packages/jp.keijiro.yamu/Editor` is the C# MCP server implementation.
- `Packages/jp.keijiro.yamu/Node` is the Node.js MCP bridge.
- `McpTests/` contains Python integration tests for the MCP server.
- `ProjectSettings/` stores Unity project settings; commit only intentional changes.
- `Library/PackageCache/` is generated by Unity and should not be edited.

## Build, Test, and Development Commands
- Open the project in Unity 6000.0 or later; compilation runs automatically.
- Run the MCP bridge (Unity must be running): `node Packages/jp.keijiro.yamu/Node/mcp-server.js --port 17932`.
- Install integration test dependencies: `cd McpTests; pip install -r requirements.txt`.
- Run integration tests: `cd McpTests; pytest` (use `-m essential` or `-m protocol` for faster subsets).

## Coding Style and Naming Conventions
- Indentation is 4 spaces; no tabs; no trailing whitespace.
- C# style: use `var` when the type is obvious, omit implicit `private`, omit braces for single-statement blocks, and prefer expression-bodied members.
- Comments must be in English; avoid documentation-style comments.
- Naming: PascalCase for C# types and methods; align filenames with the main class (e.g., `YamuServer.cs`).

## Testing Guidelines
- Unity tests use NUnit and Unity Test Runner; keep tests under `Assets/Tests/...` and name files `*Tests.cs`.
- MCP integration tests use pytest; name files `test_*.py` and apply markers from `pytest.ini` (for example, `essential`, `protocol`, `structural`).
- Integration tests require the Unity Editor running with the project open.

## Commit and Pull Request Guidelines
- Commit subjects are short English imperatives (examples: "Add ...", "Fix ..."); some commits include a trailing `#AI` tag.
- PRs should describe the change, list test commands run, and note any Unity version or MCP settings updates. Include screenshots for UI changes.
